!function(t,i){"object"==typeof exports&&"object"==typeof module?module.exports=i():"function"==typeof define&&define.amd?define([],i):"object"==typeof exports?exports["photolayout.min"]=i():t["photolayout.min"]=i()}(this,function(){return function(t){function i(n){if(e[n])return e[n].exports;var o=e[n]={exports:{},id:n,loaded:!1};return t[n].call(o.exports,o,o.exports,i),o.loaded=!0,o.exports}var e={};return i.m=t,i.c=e,i.p="",i(0)}([function(t,i,e){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(i,"__esModule",{value:!0});var o,r=e(8),s=n(r),u=e(12),h=n(u),c=e(11),a=(n(c),e(10)),f=n(a);o={Layout:s["default"],ResponsiveLayout:h["default"],Configuration:f["default"]},i["default"]=o},,,,,,,,function(t,i,e){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(i,"__esModule",{value:!0});var o,r=e(9),s=n(r),u=e(10),h=n(u),c=e(11),a=n(c);o=function(){function t(t){t instanceof h["default"]?this._config=t:this._config=new h["default"](t),this._current_line=new s["default"](this._config,this),this._lines=[this._current_line]}return t.prototype.add=function(t){var i,e,n;if(t instanceof Array){for(i=0,e=t.length;e>i;i++)n=t[i],this.add(n);return this}return this._current_line.accept(t)?this._current_line.add(t):(this._current_line=new s["default"](this._config,this),this._lines.push(this._current_line),this._current_line.add(t)),this},t.prototype.getItems=function(t,i){var e,n,o,r,s,u,h,c,a,f,_,l,d,p,g,y,m;if(null==t&&(t=0),r=[],d=0,0===t&&null==i){for(p=this._lines,n=0,c=p.length;c>n;n++){for(l=p[n],g=l.getItems(d),s=0,a=g.length;a>s;s++)o=g[s],r.push(o);null!=o&&(d+=o.h+this._config.margin())}return r}for(raise("ERROR "),y=this._lines,u=0,f=y.length;f>u;u++)if(l=y[u],e=l.height(),t>d)d+=e+this._config.margin();else{for(m=l.getItems(d),h=0,_=m.length;_>h;h++)o=m[h],r.push(o);if(d+=e+this._config.margin(),null!=i&&d>=i)break}return r},t.prototype.height=function(){var t,i,e,n,o;for(t=0,o=this._lines,i=0,e=o.length;e>i;i++)n=o[i],t+=n.height();return t+=(this._lines.length-1)*this._config.margin()},t.prototype.min_max_line_ratio=function(){var t,i,e,n,o,r;for(o=n=this._lines[0].ratio(),r=this._lines,t=0,i=r.length;i>t;t++)e=r[t],o=Math.min(e.ratio(),o),n=Math.max(e.ratio(),n);return[o,n]},t.prototype.css=function(){return(new a["default"]).add_rules(this._config.selector(),{"float":"left",margin:"0 "+this._config.margin()+"% "+this._config.margin()+"% 0"}).add_block(this.css_for_items()).css()},t.prototype.css_for_items=function(){var t,i,e,n,o,r,s,u,h,c,f,_;for(t=new a["default"],i=[],c=this._lines,e=0,r=c.length;r>e;e++){for(u=c[e],h=[],f=u.getItems(),o=0,s=f.length;s>o;o++)n=f[o],_=this._config.selector()+n.o.id,t.add_rules(_,{width:n.w+"%"}),h.push(_);t.add_rules(h.join(","),{"padding-top":u.height()+"%"}),i.push(_)}return this._config.margin()>0&&t.add_rules(i.join(","),{"margin-right":0}),t.css()},t}(),o.layout=function(t,i){var e;return e=new o(t),e.add(i),e.getItems()},i["default"]=o},function(t,i,e){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(i,"__esModule",{value:!0});var o,r=e(10),s=n(r);o=function(){function t(t,i){this._layout=i,t instanceof s["default"]?this._config=t:this._config=new s["default"](t),this._objects=[],this._objects_ratio=0}return t.prototype.accept=function(t){return 0===this._objects.length?!0:1/this.calculate_ratio_with(t)>this._config.zoom()},t.prototype.ratio=function(){return this._layout._lines.indexOf(this)===this._layout._lines.length-1&&1/this._config.zoom()>this._objects_ratio?1/this._config.zoom():this._objects_ratio},t.prototype.height=function(){return 0===this._objects.length?0:100/this.ratio()},t.prototype.add=function(t){return 0===this._objects.length?this._objects_ratio=this.object_ratio(t):this._objects_ratio+=this.object_ratio(t),this._objects.push(t)},t.prototype.getItems=function(t){var i,e,n,o,r,s,u,h,c,a,f;if(0===this._objects.length)return[];for(e=[],h=0,r=100-(this._objects.length-1)*this._config.margin(),c=this.ratio(),o=r/c,a=this._objects,i=0,n=a.length;n>i;i++)s=a[i],u=this.object_ratio(s),f=o*u,e.push({o:s,w:f,h:o,offset_x:h,offset_y:t}),h+=f+this._config.margin();return e},t.prototype.calculate_ratio_with=function(t){return this._objects_ratio+this.object_ratio(t)},t.prototype.object_ratio=function(t){return t.ratio},t}(),i["default"]=o},function(t,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var e;e=function(){function t(t){this._config=t}return t.prototype.zoom=function(){return this._config.zoom||1},t.prototype.line_height=function(){return null==this._config.line_height?200:this._config.line_height},t.prototype.margin=function(){return null==this._config.margin?5:1*this._config.margin},t.prototype.tolerance=function(){return null==this._config.tolerance?.3:1*this._config.tolerance},t.prototype.max_width=function(){return null==this._config.max_width?2500:1*this._config.max_width},t.prototype.min_width=function(){return null==this._config.min_width?200:1*this._config.max_width},t.prototype.selector=function(){return".i"},t.prototype.to_hash=function(){return{line_height:this.line_height(),margin:this.margin(),tolerance:this.tolerance(),max_width:this.max_width(),min_width:this.min_width(),selector:this.selector()}},t.prototype.derivate=function(i){var e,n,o;e=this.to_hash();for(n in i)o=i[n],e[n]=o;return new t(e)},t}(),i["default"]=e},function(t,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var e;e=function(){function t(){this._css=""}return t.prototype.add_block=function(t,i){return null!=i?this._css+=i+"{"+t+"}":this._css+=t,this},t.prototype.add_rules=function(t,i){var e,n,o;e="";for(n in i)o=i[n],e+=n+":"+o+";";return this.add_block(e,t),this},t.prototype.css=function(){return this._css},t}(),i["default"]=e},function(t,i,e){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(i,"__esModule",{value:!0});var o,r=e(8),s=n(r),u=e(11),h=n(u),c=e(10),a=n(c);o=function(){function t(t){t instanceof a["default"]?this._config=t:this._config=new a["default"](t),this._photos=[],this._layouts=void 0}return t.prototype.getLayouts=function(){var t,i,e,n,o,r;if(null!=this._layouts)return this._layouts;for(this._layouts={},r=this._config.max_width();r>this._config.min_width();)t=new s["default"](this._config.derivate({zoom:this._config.line_height()/r,margin:this._config.margin()/r*100})),t.add(this._photos),this._layouts[r]=t,n=t.min_max_line_ratio(),e=n[0],i=n[1],o=r-r*this._config.tolerance(),r-=Math.round(o/e);return this._layouts},t.prototype.add=function(t){var i,e,n;if(t instanceof Array){for(i=0,e=t.length;e>i;i++)n=t[i],this.add(n);return this}return this._photos.push(t),this._layouts=void 0,this},t.prototype.layout_for=function(t){return layout},t.prototype.breakpoints=function(){return Object.keys(this.getLayouts()).sort(function(t,i){return i-t})},t.prototype.css=function(){var t,i,e,n,o;for(t=new h["default"],n=this.breakpoints(),i=0,e=n.length;e>i;i++)o=n[i],t.add_block(this._layouts[o].css(),"@media (max-width: "+o+"px)");return t.css()},t}(),i["default"]=o}])});