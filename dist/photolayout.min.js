!function(t,i){"object"==typeof exports&&"object"==typeof module?module.exports=i():"function"==typeof define&&define.amd?define([],i):"object"==typeof exports?exports["photolayout.min"]=i():t["photolayout.min"]=i()}(this,function(){return function(t){function i(o){if(e[o])return e[o].exports;var n=e[o]={exports:{},id:o,loaded:!1};return t[o].call(n.exports,n,n.exports,i),n.loaded=!0,n.exports}var e={};return i.m=t,i.c=e,i.p="",i(0)}([function(t,i,e){"use strict";function o(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(i,"__esModule",{value:!0});var n,s=e(8),r=o(s),u=e(11),h=o(u),_=e(10);o(_);n={Layout:r["default"],ResponsiveLayout:h["default"]},i["default"]=n},,,,,,,,function(t,i,e){"use strict";function o(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(i,"__esModule",{value:!0});var n,s=e(9),r=o(s),u=e(10),h=o(u);n=function(){function t(t,i,e){this._zoom=t,this._margin=null!=i?i:0,this._selector=null!=e?e:".i",this._margin=1*this._margin,this._current_line=new r["default"](this),this._lines=[this._current_line]}return t.prototype.add=function(t){var i,e,o;if(t instanceof Array){for(i=0,e=t.length;e>i;i++)o=t[i],this.add(o);return this}return this._current_line.accept(t)?this._current_line.add(t):(this._current_line=new r["default"](this),this._lines.push(this._current_line),this._current_line.add(t)),this},t.prototype.getItems=function(t,i){var e,o,n,s,r,u,h,_,a,l,c,f,p,d,y,g,m;if(null==t&&(t=0),s=[],p=0,0===t&&null==i){for(d=this._lines,o=0,_=d.length;_>o;o++){for(f=d[o],y=f.getItems(p),r=0,a=y.length;a>r;r++)n=y[r],s.push(n);p+=n.h+this._margin}return s}for(raise("ERROR "),g=this._lines,u=0,l=g.length;l>u;u++)if(f=g[u],e=f.height(),t>p)p+=e+this._margin;else{for(m=f.getItems(p),h=0,c=m.length;c>h;h++)n=m[h],s.push(n);if(p+=e+this._margin,null!=i&&p>=i)break}return s},t.prototype.height=function(){var t,i,e,o,n;for(t=0,n=this._lines,i=0,e=n.length;e>i;i++)o=n[i],t+=o.height();return t+=(this._lines.length-1)*this._margin},t.prototype.min_max_line_ratio=function(){var t,i,e,o,n,s;for(n=o=this._lines[0].ratio(),s=this._lines,t=0,i=s.length;i>t;t++)e=s[t],n=Math.min(e.ratio(),n),o=Math.max(e.ratio(),o);return[n,o]},t.prototype.css=function(){return(new h["default"]).add_rules(this._selector,{"float":"left",margin:"0 "+this._margin+"% "+this._margin+"% 0"}).add_block(this.css_for_items()).css()},t.prototype.css_for_items=function(){var t,i,e,o,n,s,r,u,_,a,l,c;for(t=new h["default"],i=[],a=this._lines,e=0,s=a.length;s>e;e++){for(u=a[e],_=[],l=u.getItems(),n=0,r=l.length;r>n;n++)o=l[n],c=this._selector+o.o.id,t.add_rules(c,{width:o.w+"%"}),_.push(c);t.add_rules(_.join(","),{"padding-top":u.height()+"%"}),i.push(c)}return this._margin>0&&t.add_rules(i.join(","),{"margin-right":0}),t.css()},t}(),i["default"]=n},function(t,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var e;e=function(){function t(t){this._layout=t,this._objects=[],this._objects_ratio=0}return t.prototype.accept=function(t){return 0===this._objects.length?!0:1/this.calculate_ratio_with(t)>this._layout._zoom},t.prototype.ratio=function(){return this._layout._lines.indexOf(this)===this._layout._lines.length-1&&Math.abs(this._objects_ratio-1/this._layout._zoom)/this._objects_ratio>1?1/this._layout._zoom:this._objects_ratio},t.prototype.height=function(){return 0===this._objects.length?0:100/this.ratio()},t.prototype.add=function(t){return 0===this._objects.length?this._objects_ratio=this.object_ratio(t):this._objects_ratio+=this.object_ratio(t),this._objects.push(t)},t.prototype.getItems=function(t){var i,e,o,n,s,r,u,h,_,a,l;if(0===this._objects.length)return[];for(e=[],h=0,s=100-(this._objects.length-1)*this._layout._margin,_=this.ratio(),n=s/_,a=this._objects,i=0,o=a.length;o>i;i++)r=a[i],u=this.object_ratio(r),l=n*u,e.push({o:r,w:l,h:n,offset_x:h,offset_y:t}),h+=l+this._layout._margin;return e},t.prototype.calculate_ratio_with=function(t){return this._objects_ratio+this.object_ratio(t)},t.prototype.object_ratio=function(t){return t.ratio},t}(),i["default"]=e},function(t,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var e;e=function(){function t(){this._css=""}return t.prototype.add_block=function(t,i){return null!=i?this._css+=i+"{"+t+"}":this._css+=t,this},t.prototype.add_rules=function(t,i){var e,o,n;e="";for(o in i)n=i[o],e+=o+":"+n+";";return this.add_block(e,t),this},t.prototype.css=function(){return this._css},t}(),i["default"]=e},function(t,i,e){"use strict";function o(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(i,"__esModule",{value:!0});var n,s=e(8),r=o(s),u=e(10),h=o(u);n=function(){function t(t){var i;this._options=null!=t?t:{},(i=this._options).line_height||(i.line_height=200),null==this._options.margin&&(this._options.margin=5),null==this._options.max_width&&(this._options.max_width=2500),null==this._options.min_width&&(this._options.min_width=200),null==this._options.tolerance&&(this._options.tolerance=.3),this._photos=[],this._layouts=void 0}return t.prototype.getLayouts=function(){var t,i,e,o,n,s;if(null!=this._layouts)return this._layouts;for(this._layouts={},s=this._options.max_width;s>this._options.min_width;)t=new r["default"](this._options.line_height/s,this._options.margin/s*100),t.add(this._photos),this._layouts[s]=t,o=t.min_max_line_ratio(),e=o[0],i=o[1],n=s-s*this._options.tolerance,s-=Math.round(n/e);return this._layouts},t.prototype.add=function(t){var i,e,o;if(t instanceof Array){for(i=0,e=t.length;e>i;i++)o=t[i],this.add(o);return this}return this._photos.push(t),this._layouts=void 0,this},t.prototype.layout_for=function(t){return layout},t.prototype.breakpoints=function(){return Object.keys(this.getLayouts()).sort(function(t,i){return i-t})},t.prototype.css=function(){var t,i,e,o,n;for(t=new h["default"],o=this.breakpoints(),i=0,e=o.length;e>i;i++)n=o[i],t.add_block(this._layouts[n].css(),"@media (max-width: "+n+"px)");return t.css()},t}(),i["default"]=n}])});