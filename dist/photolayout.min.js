!function(t,i){"object"==typeof exports&&"object"==typeof module?module.exports=i():"function"==typeof define&&define.amd?define([],i):"object"==typeof exports?exports["photolayout.min"]=i():t["photolayout.min"]=i()}(this,function(){return function(t){function i(e){if(o[e])return o[e].exports;var n=o[e]={exports:{},id:e,loaded:!1};return t[e].call(n.exports,n,n.exports,i),n.loaded=!0,n.exports}var o={};return i.m=t,i.c=o,i.p="",i(0)}([function(t,i,o){"use strict";function e(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(i,"__esModule",{value:!0});var n,s=o(8),r=e(s),h=o(10),u=e(h);n=function(){function t(t){var i;this._options=null!=t?t:{},(i=this._options).line_height||(i.line_height=200),null==this._options.margin&&(this._options.margin=5),null==this._options.max_width&&(this._options.max_width=2500),null==this._options.min_width&&(this._options.min_width=200),null==this._options.tolerance&&(this._options.tolerance=.3),this._photos=[],this._layouts=void 0}return t.prototype.getLayouts=function(){var t,i,o,e,n,s;if(null!=this._layouts)return this._layouts;for(this._layouts={},s=this._options.max_width;s>this._options.min_width;)t=new r["default"](this._options.line_height/s,this._options.margin/s*100),t.add(this._photos),this._layouts[s]=t,e=t.min_max_line_ratio(),o=e[0],i=e[1],n=s-s*this._options.tolerance,s-=Math.round(n/o);return this._layouts},t.prototype.add=function(t){var i,o,e;if(t instanceof Array){for(i=0,o=t.length;o>i;i++)e=t[i],this.add(e);return this}return this._photos.push(t),this._layouts=void 0,this},t.prototype.layout_for=function(t){return layout},t.prototype.breakpoints=function(){return Object.keys(this.getLayouts()).sort(function(t,i){return i-t})},t.prototype.css=function(){var t,i,o,e,n;for(t=new u["default"],e=this.breakpoints(),i=0,o=e.length;o>i;i++)n=e[i],t.add_block(this._layouts[n].css(),"@media (max-width: "+n+"px)");return t.css()},t}(),i["default"]=n},,,,,,,,function(t,i,o){"use strict";function e(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(i,"__esModule",{value:!0});var n,s=o(9),r=e(s),h=o(10),u=e(h);n=function(){function t(t,i,o){this._zoom=t,this._margin=null!=i?i:0,this._selector=null!=o?o:".i",this._margin=1*this._margin,this._current_line=new r["default"](this),this._lines=[this._current_line]}return t.prototype.add=function(t){var i,o,e;if(t instanceof Array){for(i=0,o=t.length;o>i;i++)e=t[i],this.add(e);return this}return this._current_line.accept(t)?this._current_line.add(t):(this._current_line=new r["default"](this),this._lines.push(this._current_line),this._current_line.add(t)),this},t.prototype.getItems=function(t,i){var o,e,n,s,r,h,u,_,a,l,c,f,p,d,y,g,m;if(null==t&&(t=0),s=[],p=0,0===t&&null==i){for(d=this._lines,e=0,_=d.length;_>e;e++){for(f=d[e],y=f.getItems(p),r=0,a=y.length;a>r;r++)n=y[r],s.push(n);p+=n.h+this._margin}return s}for(raise("ERROR "),g=this._lines,h=0,l=g.length;l>h;h++)if(f=g[h],o=f.height(),t>p)p+=o+this._margin;else{for(m=f.getItems(p),u=0,c=m.length;c>u;u++)n=m[u],s.push(n);if(p+=o+this._margin,null!=i&&p>=i)break}return s},t.prototype.height=function(){var t,i,o,e,n;for(t=0,n=this._lines,i=0,o=n.length;o>i;i++)e=n[i],t+=e.height();return t+=(this._lines.length-1)*this._margin},t.prototype.min_max_line_ratio=function(){var t,i,o,e,n,s;for(n=e=this._lines[0].ratio(),s=this._lines,t=0,i=s.length;i>t;t++)o=s[t],n=Math.min(o.ratio(),n),e=Math.max(o.ratio(),e);return[n,e]},t.prototype.css=function(){return(new u["default"]).add_rules(this._selector,{"float":"left",margin:"0 "+this._margin+"% "+this._margin+"% 0"}).add_block(this.css_for_items()).css()},t.prototype.css_for_items=function(){var t,i,o,e,n,s,r,h,_,a,l,c;for(t=new u["default"],i=[],a=this._lines,o=0,s=a.length;s>o;o++){for(h=a[o],_=[],l=h.getItems(),n=0,r=l.length;r>n;n++)e=l[n],c=this._selector+e.o.id,t.add_rules(c,{width:e.w+"%"}),_.push(c);t.add_rules(_.join(","),{"padding-top":h.height()+"%"}),i.push(c)}return this._margin>0&&t.add_rules(i.join(","),{"margin-right":0}),t.css()},t}(),i["default"]=n},function(t,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var o;o=function(){function t(t){this._layout=t,this._objects=[],this._objects_ratio=0}return t.prototype.accept=function(t){return 0===this._objects.length?!0:1/this.calculate_ratio_with(t)>this._layout._zoom},t.prototype.ratio=function(){return this._layout._lines.indexOf(this)===this._layout._lines.length-1&&Math.abs(this._objects_ratio-1/this._layout._zoom)/this._objects_ratio>1?1/this._layout._zoom:this._objects_ratio},t.prototype.height=function(){return 0===this._objects.length?0:100/this.ratio()},t.prototype.add=function(t){return 0===this._objects.length?this._objects_ratio=this.object_ratio(t):this._objects_ratio+=this.object_ratio(t),this._objects.push(t)},t.prototype.getItems=function(t){var i,o,e,n,s,r,h,u,_,a,l;if(0===this._objects.length)return[];for(o=[],u=0,s=100-(this._objects.length-1)*this._layout._margin,_=this.ratio(),n=s/_,a=this._objects,i=0,e=a.length;e>i;i++)r=a[i],h=this.object_ratio(r),l=n*h,o.push({o:r,w:l,h:n,offset_x:u,offset_y:t}),u+=l+this._layout._margin;return o},t.prototype.calculate_ratio_with=function(t){return this._objects_ratio+this.object_ratio(t)},t.prototype.object_ratio=function(t){return t.ratio},t}(),i["default"]=o},function(t,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var o;o=function(){function t(){this._css=""}return t.prototype.add_block=function(t,i){return null!=i?this._css+=i+"{"+t+"}":this._css+=t,this},t.prototype.add_rules=function(t,i){var o,e,n;o="";for(e in i)n=i[e],o+=e+":"+n+";";return this.add_block(o,t),this},t.prototype.css=function(){return this._css},t}(),i["default"]=o}])});