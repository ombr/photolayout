!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports["photolayout.min"]=e():t["photolayout.min"]=e()}(this,function(){return function(t){function e(o){if(i[o])return i[o].exports;var n=i[o]={exports:{},id:o,loaded:!1};return t[o].call(n.exports,n,n.exports,e),n.loaded=!0,n.exports}var i={};return e.m=t,e.c=i,e.p="",e(0)}([function(t,e,i){"use strict";function o(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var n,r=i(2),s=o(r);n=function(){function t(t){var e;this._options=null!=t?t:{},(e=this._options).line_height||(e.line_height=200),this._options.margin||(this._options.margin=5),this._photos=[]}return t.prototype.add=function(t){var e,i,o;if(t instanceof Array){for(e=0,i=t.length;i>e;e++)o=t[e],this.add(o);return this}return this._photos.push(t),this},t.prototype.css_for_width=function(t){var e;return e=new s["default"](this._options.line_height/t,this._options.margin/t*100),e.add(this._photos),e.css()},t.prototype.css=function(t){var e,i,o,n,r;for(null==t&&(t=[200,500,800,1e3,1500]),o=t.splice(0,1)[0],i=this.css_for_width(o),n=0,r=t.length;r>n;n++)e=t[n],i+="@media (min-width: "+e+"px){\n"+this.css_for_width(e)+"}\n";return i},t}(),e["default"]=n},,function(t,e,i){"use strict";function o(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var n,r=i(3),s=o(r);n=function(){function t(t,e,i){this._zoom=t,this._margin=null!=e?e:0,this._selector=null!=i?i:".i",this._margin=1*this._margin,this._current_line=new s["default"](this),this._lines=[this._current_line]}return t.prototype.add=function(t){var e,i,o;if(t instanceof Array){for(e=0,i=t.length;i>e;e++)o=t[e],this.add(o);return this}return this._current_line.accept(t)?this._current_line.add(t):(this._current_line=new s["default"](this),this._lines.push(this._current_line),this._current_line.add(t)),this},t.prototype.getItems=function(t,e){var i,o,n,r,s,h,_,u,a,c,l,f,p,d,g,m,y;if(null==t&&(t=0),r=[],p=0,0===t&&null==e){for(d=this._lines,o=0,u=d.length;u>o;o++){for(f=d[o],g=f.getItems(p),s=0,a=g.length;a>s;s++)n=g[s],r.push(n);p+=n.h+this._margin}return r}for(raise("ERROR "),m=this._lines,h=0,c=m.length;c>h;h++)if(f=m[h],i=f.height(),t>p)p+=i+this._margin;else{for(y=f.getItems(p),_=0,l=y.length;l>_;_++)n=y[_],r.push(n);if(p+=i+this._margin,null!=e&&p>=e)break}return r},t.prototype.height=function(){var t,e,i,o,n;for(t=0,n=this._lines,e=0,i=n.length;i>e;e++)o=n[e],t+=o.height();return t+=(this._lines.length-1)*this._margin},t.prototype.css=function(){return this._selector+"{float: left; margin: 0 "+this._margin+"% "+this._margin+"% 0; }\n"+this.css_for_items()+".layout-container{ padding-bottom: "+this.height()+"% }"},t.prototype.css_for_items=function(){var t,e,i,o,n,r,s,h,_,u;for(t="",n=this.getItems(),i=0,s=n.length;s>i;i++)o=n[i],t+=""+this._selector+o.o.id+"{top: "+o.offset_y+"%; left: "+o.offset_x+"%;width: "+o.w+"%; padding-top: "+o.h+"%;}\n";for(e=[],u=this._lines,r=0,h=u.length;h>r;r++)_=u[r],e.push(""+this._selector+_._objects[_._objects.length-1].id);return t+=e.join(", ")+"{ margin-right: 0; }\n"},t}(),e["default"]=n},function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i;i=function(){function t(t){this._layout=t,this._objects=[],this._objects_ratio=0}return t.prototype.accept=function(t){return 0===this._objects.length?!0:1/this.calculate_ratio_with(t)>this._layout._zoom},t.prototype.ratio=function(){return Math.abs(this._objects_ratio-1/this._layout._zoom)/this._objects_ratio>1?1/this._layout._zoom:this._objects_ratio},t.prototype.height=function(){return 0===this._objects.length?0:100/this.ratio()},t.prototype.add=function(t){return 0===this._objects.length?this._objects_ratio=this.object_ratio(t):this._objects_ratio+=this.object_ratio(t),this._objects.push(t)},t.prototype.getItems=function(t){var e,i,o,n,r,s,h,_,u,a,c;if(0===this._objects.length)return[];for(i=[],_=0,r=100-(this._objects.length-1)*this._layout._margin,u=this.ratio(),n=r/u,a=this._objects,e=0,o=a.length;o>e;e++)s=a[e],h=this.object_ratio(s),c=n*h,i.push({o:s,w:c,h:n,offset_x:_,offset_y:t}),_+=c+this._layout._margin;return i},t.prototype.calculate_ratio_with=function(t){return this._objects_ratio+this.object_ratio(t)},t.prototype.object_ratio=function(t){return t.ratio},t}(),e["default"]=i}])});